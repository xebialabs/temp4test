apply plugin: 'release-plugin'

configurations {
  distBundle
}

subprojects.each { p ->
	p.apply plugin: 'java'
	p.apply plugin: 'eclipse'
  p.tasks.create('uploadArchives').configure {
    doLast {
      println "Uploading ${project.jar.outputs.files.files}"
    }
  }
}

release {
  //releaseTasks = [ ':build', ':uploadArchives', ':sub1:uploadArchives', ':sub2:uploadArchives' ]
  releaseTasks = project.getTasksByName('uploadArchives', true) + project.getTasksByName('build', true)
}
